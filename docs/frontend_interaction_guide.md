# 前端交互规范指南 (Frontend Interaction Guide)

本文档定义了 Read-Tube 前端核心功能的交互逻辑与预期行为，作为开发与测试的基准。

## 1. 视频与字幕同步播放 (Video & Subtitle Sync)

### 1.1 自动跟随 (Auto-Scroll)
*   **默认行为**：当视频播放时，字幕区域应自动滚动，保持当前播放语句处于**视觉中心**。
*   **防抖机制**：
    *   **阈值**：10px。
    *   **逻辑**：仅当目标位置偏离当前中心超过 10px 时才触发滚动，避免因微小进度更新导致的画面抖动。
*   **计算方式**：基于字幕容器 (`subtitleContainer`) 的内部相对坐标计算，而非整个窗口的 `scrollIntoView`，确保页面主体（视频/标题）静止不动。

### 1.2 手动交互模式 (Manual Interaction)
*   **触发条件**：用户在字幕区域进行任何形式的主动滚动（鼠标滚轮、触控板滑动、拖拽滚动条）。
*   **状态变更**：一旦检测到手动滚动，系统立即进入**“暂停跟随 (Paused)”**状态。
    *   自动滚动完全停止。
    *   字幕高亮继续更新，但不会移动视图。
*   **UI 反馈**：右下角立即浮现 **“同步播放进度”** 悬浮按钮。

### 1.3 恢复跟随 (Resume Sync)
*   **触发条件**：点击 **“同步播放进度”** 按钮。
*   **执行动作**：
    1.  **解除暂停**：恢复自动跟随状态。
    2.  **强制回正 (Force Snap)**：**无视** 10px 防抖阈值，强制将当前高亮字幕滚动至容器**绝对垂直居中**位置。
    3.  **隐藏按钮**：操作完成后，悬浮按钮立即消失。

## 2. 响应式布局 (Responsive Layout)

### 2.1 仪表盘布局 (Dashboard Style - Desktop)
*   **适用设备**：宽屏设备 (`lg` breakpoint, width >= 1024px)。
*   **结构**：
    *   **左侧栏**：固定高度，填满屏幕 (`h-[calc(100vh-7rem)]`)。
    *   **视频/操作区**：位于左侧栏顶部，**静态定位 (Static)**，不随字幕滚动。
    *   **字幕区**：位于操作区下方，占据剩余空间 (`flex-1`)，拥有**独立滚动条** (`overflow-y-auto`)。
*   **预期效果**：视频始终占位顶部，仅字幕区域内部发生滚动，互不遮挡。

### 2.2 移动端布局 (Mobile Flow)
*   **适用设备**：手机/平板 (< 1024px)。
*   **结构**：
    *   **视频/操作区**：使用 `sticky top-20` 吸顶。
    *   **字幕区**：跟随文档流自然排列。
*   **预期效果**：当用户向下滚动查看长字幕时，视频和操作栏会吸附在屏幕顶部，背景需带有模糊遮罩 (`backdrop-blur`) 以防止字幕内容与视频控件视觉重叠。

## 3. 已知边界情况 (Edge Cases)
*   **快速点击回正**：若用户连续快速点击回正按钮，应确保 timer 逻辑无冲突。
*   **视口调整**：拖动浏览器窗口大小时，CSS Media Query 应自动切换布局模式，无需刷新。
