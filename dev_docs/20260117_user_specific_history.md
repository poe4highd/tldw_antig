# 20260117 - 实现用户专属任务历史记录

## 任务背景
在项目初期，任务处理中心和仪表盘展示的是系统所有的处理历史。为了提高私密性和用户体验，现在实现了基于 `user_id` 的任务历史过滤功能，确保每个用户只能看到和管理自己提交的任务。

## 主要变更

### 1. 后端 (FastAPI)
- **接口增强**：
    - `/process` 和 `/upload` 现在接收可选的 `user_id` 参数。
    - `/history` 增加了 `user_id` 查询参数支持。
- **数据关联**：
    - 任务处理完成后，除了更新 `videos` 表，还会同步在 `submissions` 表中插入关联记录。
    - 历史查询逻辑由直接查询 `videos` 表改为查询 `submissions` 表并 Join `videos` 表。
- **本地回退**：
    - 如果 Supabase 不可用，本地 JSON 结果文件现在也会存储并过滤 `user_id`。

### 2. 前端 (Next.js)
- **任务中心 (`/tasks`)**：
    - 自动识别当前登录用户并将其 ID 注入到任务提交流程。
    - 历史列表改为仅拉取当前用户的记录。
- **仪表盘 (`/dashboard`)**：
    - 历史记录同步更新为用户专属视图。

## 后续建议
- 实现任务的“公开/私有”切换功能，允许用户手动将某些处理结果分享到公共广场。
- 增加用户对历史记录的删除功能。
