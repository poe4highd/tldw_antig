# 核心功能改进计划 (Core Feature Improvement Plan)

## 1. 背景与目标
针对近期用户反馈，我们需要解决以下三个关键问题：
*   **下载管理**：处理带 Playlist ID 的 URL 时，禁止下载整个列表。
*   **转录质量**：修复文本校正后错别字增多的问题，恢复至之前的高水准。
*   **语言一致性**：根据视频标题自动识别语言，并确保转录和校正后的文本与原语言保持一致。

---

## 2. 改进方案

### 2.1 优化下载器 (downloader.py)
*   **具体变动**：在 `yt-dlp` 的配置项中添加 `'noplaylist': True`。
*   **预期效果**：即使用户提供的链接包含播放列表 ID，系统也将只下载当前视频。

### 2.2 提升转录校正质量 (processor.py)
*   **现状分析**：目前的 Prompt 可能过于强调“简体中文”转换，导致 LLM 在处理非纯中文内容或生僻词时产生过度干预。
*   **优化策略**：
    *   精简 Prompt，强调“忠实原文”而非“强制转换”。
    *   明确指示 LLM 在校正时优先保持语境语义，减少不必要的字词替换。

### 2.3 实现多语言一致性 (processor.py)
*   **检测逻辑**：改进 `is_traditional` 逻辑，增加对英文及其他主要语言的识别能力。
*   **动态指令**：
    *   如果标题是英文 -> 转录和校正均设为英文模式。
    *   如果标题是繁体 -> 转录和校正均设为繁体模式。
    *   否则，默认使用简体中文，但允许保留原文中的英文术语。
*   **Prompt 调整**：将语言偏好作为动态变量注入 Prompt，明确告知 LLM 不要进行跨语言翻译。

---

## 3. 实施步骤
1.  **Phase 1**: 修改 `downloader.py` 并通过带 playlist 的链接测试。
2.  **Phase 2**: 重构 `processor.py` 中的语言检测函数，并优化核心 `PROMPT`。
3.  **Phase 3**: 针对中、繁、英三种测试用例进行冒烟测试，确保文字一致性。
4.  **Phase 4**: 提交 (Commit) 并推送 (Push) 代码。

---
*版本：v1.1 | 更新日期：2026-01-16*
