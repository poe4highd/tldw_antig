# 技术记录：多语言音轨支持与存储优化观察

## 记录日期：2026-01-17

### 1. 现状：多语言音轨不一致问题
在处理 YouTube 视频时，发现部分视频包含多语言音轨（如中文和英文）。
- **问题**：转录器下载了中文音轨并生成了中文文本，但前端 YouTube IFrame 播放器由于区域或设置原因，默认播放了英文音轨，导致音画/字幕不匹配。
- **已实施方案**：
    - 后端更新了 `yt-dlp` 配置，显式优先匹配中文音轨 (`[language*=zh]`)。
    - 前端 YouTube 嵌入 URL 添加了 `&hl=zh-CN` 诱导。
    - 前端新增了“本地音频同步”功能，允许用户直接切换到已下载的中文音频文件，确保 100% 同步。

### 2. 观察项目：存储资源占用
随着本地音频同步功能的引入，系统现在必须保存原始的音频文件以供前端播放。

**风险点**：
- 长期运行下，`downloads/` 目录的体积会不断增长。
- 平均 1 小时音频约占用 50-60 MB。

**待观察与优化建议**：
1. **自动清理机制**：后续可考虑在 `maintenance.py` 中增加逻辑，自动删除 30 天以前的音频文件（仅保留转录 JSON 结果）。
2. **音频转码**：考虑将下载的音频自动转换为更低码率的 Opus 或 MP3 (32kbps)，在不影响转录和播放的前提下进一步节省空间。

---
*记录人：Antigravity (AI)*
